# Вопрос 4
* Какие бывают индексы. Что такое селективность. Привести пример успешного индекса, который будет учитывать селективность для модели данных, которую вы разработали на лекции 3 и пояснить почему.
---

### Какие бывают индексы?
***Индекс*** — объект базы данных, создаваемый с целью повышения производительности поиска данных. Индексом является отсортированный набор значений.

##### Типы индексов:
* Обычный - хранит ссылки на записи
* Кластерный - хранит данные записекй целиком, а не ссылки на них

##### Специальные типы индексов:
Существует большое число специальных индексов, которые могут быть как кластерными, так и некластерными. Рассмотрим некоторые из них.

* Простой - создается по единственному столбцу
* Составной - индекс, который: 
    * может включать более одного (до 16) столбцов, выступающих ключевыми значениями
    * ограничивается общей длиной (не превышающей 900 байт)
    * содержит поля, которые принадлежат единой таблице
---

### Что такое селективность?
***Селективность*** — это показатель того, сколько строк от общего числа приходится на одно ключевое значение индекса. Построим формулу.

`Селективность индекса = ( NUM_ROWS/DISTINCT_KEY) / NUM_ROWS = 1/DISTINCT_KEY `

Таким образом, чтобы рассчитать селективность индекса довольно посмотреть значение DISTINCT_KEYS в динамическом представлении ALL_INDEXES. Селективность чаще вычисляют в процентах. Чем больше этот процент, тем меньше (хуже) селективность. Селективность хороша, если мало строк имеют одинаковые ключевые значения.

---
### Пример успешного индекса, который будет учитывать селективность для модели данных

```sql
CREATE TABLE `clothes`
{
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `brand_id` int(11) NOT NULL
  `type` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `sex` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `size` tinyInt(4) NOT NULL,
  PRIMARY KEY (`id`)
}
DEFAULT CHARSET = utf-8
COLLATE = utf8_unicode_ci

CREATE TABLE `brands`
{
	`id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
}
DEFAULT CHARSET = utf-8
COLLATE = utf8_unicode_ci
```

```sql
alter table clothes
	add constraint clothes_brands_fk
    foreign key (brand_id) references brands(id)
```

```sql
select * from clothes where size = 29 and sex = 'male';
create index size_sex on clothes(size, sex)
```

Для каждой колонки мы берем значени size и sex, "склеиваем" их и получаем новую строку. В дальнейшем это положительно скажется на времени обработки запросов
